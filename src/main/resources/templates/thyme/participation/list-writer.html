<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>공동구매 신청 리스트 - 작성자ver</title>
    <link rel="stylesheet" th:href="@{/style/header.css}" href="../../../static/style/header.css"/>
    <link rel="stylesheet" th:href="@{/style/participation/list.css}"
          href="../../../static/style/participation/list.css">
    <link rel="stylesheet" th:href="@{https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css}"/>
    <script th:src="@{/js/participation/list.js}"></script>
</head>
<body>
<!-- header 삽입 -->
<div th:insert="~{thyme/frameHeader :: header}"></div>
<p id="title">공동구매 참여자 목록</p>
<input type="hidden" id="groupBuyingId" value="${groupBuyingId}">
<hr>
<div class="back">
    <table>
        <thead>
        <tr>
            <th class="left-rounded">순서</th>
            <th>이름</th>
            <th>전화번호</th>
            <th>추가사항</th>
            <th>등록일</th>
            <th class="right-rounded">수락 여부</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="participation, iterStat : ${participationList}" style="cursor: pointer;">
            <td th:text="${iterStat.index + 1}" class="left-rounded"
                th:onclick="'window.location.href=\'/participation/detail?participationId=' + ${participation.id} + '\''"></td>
            <td th:text="${participation.member.nickname}"
                th:onclick="'window.location.href=\'/participation/detail?participationId=' + ${participation.id} + '\''"></td>
            <td th:text="${participation.member.phone}"
                th:onclick="'window.location.href=\'/participation/detail?participationId=' + ${participation.id} + '\''"></td>
            <td th:text="${participation.content}"
                th:onclick="'window.location.href=\'/participation/detail?participationId=' + ${participation.id} + '\''"></td>
            <td th:text="${#temporals.format(participation.createdAt, 'yyyy-MM-dd')}"
                th:onclick="'window.location.href=\'/participation/detail?participationId=' + ${participation.id} + '\''"></td>
            <td class="right-rounded">
                <button th:classappend="${participation.accept == 1} ? 'status-accept' : (${participation.accept == 0} ? 'status-accept-pre' : 'status-accept-pre')"
                        th:onclick="|handleAcceptance(1, ${participation.id}, ${memberId}, ${participation.groupBuying.id})|">
                    수락
                </button>
                <button th:classappend="${participation.accept == 2} ? 'status-reject' : (${participation.accept == 0} ? 'status-reject-pre' : 'status-reject-pre')"
                        th:onclick="|handleAcceptance(2, ${participation.id}, ${memberId}, ${participation.groupBuying.id})|">
                    거절
                </button>
            </td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>